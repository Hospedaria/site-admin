<h1 mat-dialog-title>Adicionar pagamento</h1>
<div class="p-2">
  <form [formGroup]="form">
    <div class="col-12 form-outline">
      <mat-form-field class="w-100" appearance="outline">
        <mat-label>Descrição</mat-label>
        <input
          required
          matInput
          type="text"
          formControlName="descricao"
          [(ngModel)]="pagamento.descricao"
          >

        @if (form.get('descricao')?.errors?.['required']) {
          <mat-error>
            Descrição é obrigatória
          </mat-error>
        }
        @else if (form.get('descricao')?.errors?.['maxlength']){
          <mat-error>
            Descrição pode ter no máximo 200 caracteres
          </mat-error>
        }
      </mat-form-field>
    </div>
    <div class="col-12 form-outline">
      <div class="row">
        <div class="col-6">
          <mat-form-field class="w-100" appearance="outline">
            <mat-label>Valor</mat-label>
            <input
              required
              matInput
              type="number"
              min="0"
              placeholder="0"
              formControlName="valor"
              [(ngModel)]="pagamento.valor"
            />

            @if (form.get('valor')?.errors?.['required']) {
            <mat-error> Valor é obrigatório </mat-error>
            } @else if (form.get('valor')?.errors?.['min']){
            <mat-error> Valor deve ser no mínimo R$ 0,01 </mat-error>
            }
          </mat-form-field>
        </div>
        <div class="col-6">
          <mat-form-field class="w-100" appearance="outline">
            <mat-label>Data</mat-label>
            <input
              matInput
              [(ngModel)]="pagamento.data"
              formControlName="data"
              [matDatepicker]="picker"
            />
            <mat-datepicker-toggle
              matIconSuffix
              [for]="picker"
            ></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>

            @if (form.get('data')?.errors?.['required']) {
            <mat-error> Data de pagamento é obrigatória </mat-error>
            }
          </mat-form-field>
        </div>
      </div>
    </div>
  </form>
</div>
<div mat-dialog-actions>
  <button color="warn" (click)="onClose()" mat-button mat-dialog-close>
    Cancelar
  </button>
  <button
    color="primary"
    mat-raised-button
    (click)="onAdicionar()"
    cdkFocusInitial
  >
    Adicionar
  </button>
</div>
